(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["produto-produto-module"],{

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/produto/produto.page.html":
/*!*********************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/produto/produto.page.html ***!
  \*********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<ion-header>\n  <ion-toolbar>\n      <ion-buttons slot=\"start\">\n          <ion-buttons slot=\"start\">\n              <a routerLink=\"/produtos/{{ back_button }}\"><font color=\"white\">Voltar</font></a>\n              </ion-buttons>\n        </ion-buttons>\n    <ion-title>Adicionar {{ this.nome }}</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n    <ion-card>\n        <ion-card-header>\n          <ion-card-subtitle><font color=\"white\">Resumo do item</font></ion-card-subtitle>\n          <h3>QTD <ion-text color=\"success\">\n            <ion-input type=\"number\" (keyup)=\"onKeyUp($event)\" [(ngModel)]=\"this.quantidade\"></ion-input>\n          </ion-text></h3>\n        </ion-card-header>\n        <ion-card-content style=\"text-transform: uppercase\">\n          <h2><b>{{ this.nome }}</b></h2> <br>\n            {{ this.descricao }} <br>\n            Valor <ion-text style=\"text-transform: uppercase\" color=\"warning\">\n              R${{ this.preco }}\n            </ion-text>\n        </ion-card-content>\n      </ion-card>\n\n      <div *ngFor=\"let item of limit\">\n          {{ item.nome }}\n        </div>\n     \n      <div *ngFor=\"let car of menuarray_new\">\n          <ion-card>\n              <ion-card-header>{{ car.nome }} (Escolher até {{ car.quantidade }})</ion-card-header>\n              <ion-card-content>  \n                  <ion-item *ngFor=\"let add of categorias(car.id)\">\n                      <ion-label>{{ add.nome }}</ion-label> \n                      {{ precos(add.preco ) }}\n                      <ion-checkbox [(ngModel)]=\"add.isChecked\" (ionChange)='this.get_total(add.de);' slot=\"end\"></ion-checkbox>\n                    </ion-item>\n              </ion-card-content>\n          </ion-card>\n      </div>\n          <br>\n          \n         <ion-card>\n            <ion-card-content>  \n          <section class=\"ion-padding\">\n            <h2>TOTAL: R${{ this.total }}</h2>\n            <ion-button (click)=\"addcart()\" color='warning' expand=\"block\" *ngIf=\"this.nome != null\">\n              <ion-icon slot=\"end\" name='cart'></ion-icon>\n                Adicionar ao pedido\n            </ion-button>\n            {{ this.itens }}\n          </section>\n          </ion-card-content>\n         </ion-card>\n\n    \n\n\n</ion-content>\n\n<style>\n\n\n\n\n\n\n</style>");

/***/ }),

/***/ "./src/app/produto/produto.module.ts":
/*!*******************************************!*\
  !*** ./src/app/produto/produto.module.ts ***!
  \*******************************************/
/*! exports provided: ProdutoPageModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProdutoPageModule", function() { return ProdutoPageModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm2015/common.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm2015/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var _produto_page__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./produto.page */ "./src/app/produto/produto.page.ts");







const routes = [
    {
        path: '',
        component: _produto_page__WEBPACK_IMPORTED_MODULE_6__["ProdutoPage"]
    }
];
let ProdutoPageModule = class ProdutoPageModule {
};
ProdutoPageModule = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
        imports: [
            _angular_common__WEBPACK_IMPORTED_MODULE_2__["CommonModule"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_3__["FormsModule"],
            _ionic_angular__WEBPACK_IMPORTED_MODULE_5__["IonicModule"],
            _angular_router__WEBPACK_IMPORTED_MODULE_4__["RouterModule"].forChild(routes)
        ],
        declarations: [_produto_page__WEBPACK_IMPORTED_MODULE_6__["ProdutoPage"]]
    })
], ProdutoPageModule);



/***/ }),

/***/ "./src/app/produto/produto.page.scss":
/*!*******************************************!*\
  !*** ./src/app/produto/produto.page.scss ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3Byb2R1dG8vcHJvZHV0by5wYWdlLnNjc3MifQ== */");

/***/ }),

/***/ "./src/app/produto/produto.page.ts":
/*!*****************************************!*\
  !*** ./src/app/produto/produto.page.ts ***!
  \*****************************************/
/*! exports provided: ProdutoPage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProdutoPage", function() { return ProdutoPage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _ionic_native_http_ngx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ionic-native/http/ngx */ "./node_modules/@ionic-native/http/ngx/index.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./src/app/config.ts");






let ProdutoPage = class ProdutoPage {
    constructor(route, router, http, alertCtrl, navCtrl, loadingController, zone) {
        this.route = route;
        this.router = router;
        this.http = http;
        this.alertCtrl = alertCtrl;
        this.navCtrl = navCtrl;
        this.loadingController = loadingController;
        this.zone = zone;
        this.product = [];
        this.adicionais = [];
        this.total = 0;
        this.quantidade = 1;
        this.final = [];
        this.itens = [];
        this.jsonfinal = [];
        this.adicionaisitem = [];
        this.menuarray = [];
        this.menuarray_new = [];
        this.restaurante = [];
        this.NUMBER_REGEXP = /^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/;
        //TIPOS: 1 = ADICIONAL | 2 = COMPLEMENTO | 3 = PRODUTO | 4 = OPÇÕES
        this.limit = [];
        this.checked = [];
    }
    carregando() {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function* () {
            this.loading = yield this.loadingController.create({
                message: 'Carregando'
            });
            yield this.loading.present();
        });
    }
    ngOnInit() {
        //this.carregando();
        var id = this.router.url.replace('/produto/', '');
        this.http.get(new _config__WEBPACK_IMPORTED_MODULE_5__["Config"]().local_link_api + '/api/produto/' + id, {}, {}).then((data) => {
            var datajson = JSON.parse(data.data);
            this.product = datajson[0];
            this.nome = this.product['nome'];
            this.imglogo = new _config__WEBPACK_IMPORTED_MODULE_5__["Config"]().local_link_img + this.product['img'];
            this.descricao = this.product['descricao'];
            this.preco = this.product['preco'];
            this.back_button = this.product['de'];
            this.total = Number(this.product['preco']);
            datajson.forEach(addc => {
                if (addc['de'].length > 4) {
                    JSON.parse(addc['de']).forEach(de => {
                        if (de == this.product['id']) {
                            this.menuarray_new.push(addc);
                        }
                    });
                }
                else if (addc['sub_produto'] == this.product['sub_produtos']) {
                    this.adicionaisitem.push({ nome: addc['nome'], de: addc['de'], id: addc['id'], preco: addc['preco'], isChecked: false });
                }
                //this.adicionaisitem.push({nome: addc['nome'],de: addc['de'],id: addc['id'], preco: addc['preco'], isChecked: false})
            });
            this.adicionaisitem.splice(0, 1);
        });
        /*this.http.get(new Config().local_link_api + '/api/categorias', {}, {}).then((data) => {
            this.menuarray = JSON.parse(data.data);
            this.loading.dismiss()
            this.menuarray.forEach(a => {
            JSON.parse(a['de']).forEach(de => {
              if(de == this.product['id']){
                this.menuarray_new.push(a)
              }
            });
            });
              
            }).catch((err) =>{
              this.loading.dismiss()
            });*/
    }
    categorias(id) {
        var adicionais_pr = [];
        this.adicionaisitem.forEach(e => {
            if (e['de'] == id) {
                adicionais_pr.push(e);
            }
        });
        return adicionais_pr;
    }
    routerlink_api(string) {
        this.zone.run(() => tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function* () {
            yield this.navCtrl.navigateForward(string);
        }));
    }
    onKeyUp(event) {
        this.get_total('zz');
        let newValue = event.target.value;
        let regExp = new RegExp(this.NUMBER_REGEXP);
        if (!regExp.test(newValue)) {
            event.target.value = newValue.slice(0, -1);
        }
    }
    //Adds the checkedbox to the array and check if you unchecked it
    get_total(id) {
        this.final = [];
        this.total = 0;
        this.adicionaisitem.forEach(addc => {
            if (addc['isChecked'] == true) {
                this.final.push({ nome: addc['nome'], id: addc['id'], de: addc['de'], preco: addc['preco'], tipo: 1 });
            }
            else {
                this.final.forEach(f => {
                    if (f['id'] == addc['id']) {
                        this.final.splice(f, 1);
                    }
                });
            }
        });
        this.final.forEach(v => {
            this.total = Number(this.total) + Number(v['preco']);
        });
        this.total = Number(this.total) + Number(this.product['preco']);
        this.total = Number(this.total) * Number(this.quantidade);
    }
    precos(string) {
        if (string == 0) {
            return "";
        }
        else {
            return "R$" + string;
        }
    }
    checkcomplementos() {
        var retornar = true;
        var limite = [];
        this.menuarray_new.forEach(cat => {
            var qtd = 0;
            this.final.forEach(fin => {
                if (fin['de'] == cat['id']) {
                    qtd++;
                }
            });
            if (qtd > cat['quantidade']) {
                this.alert_erro('LIMITE DE COMPLEMENTO', 'Escolha apenas ' + cat['quantidade'], cat['nome']);
                retornar = false;
            }
            if (qtd < cat['minimo']) {
                this.alert_erro('LIMITE DE COMPLEMENTO', 'Você precisa escolher pelo menos ' + cat['minimo'], cat['nome']);
                retornar = false;
            }
        });
        return retornar;
    }
    addcart() {
        this.restaurante = JSON.parse(localStorage.getItem('restaurante'));
        if (this.checkcomplementos() == false) {
            return false;
        }
        const dataz = JSON.parse(localStorage.getItem('carrinho'));
        this.itens.push({ restaurante: this.restaurante['id'], nome: this.product['nome'], adicionais: this.final, id: this.product['id'], quantidade: this.quantidade, preco: this.product['preco'], tipo: 3 });
        if (dataz == null) {
            localStorage.setItem('carrinho', JSON.stringify(this.itens));
        }
        else {
            dataz.forEach(it => {
                this.jsonfinal.push({
                    restaurante: it['restaurante'],
                    nome: it['nome'],
                    adicionais: it['adicionais'],
                    id: it['id'],
                    obs: this.obs_s,
                    quantidade: it['quantidade'],
                    preco: it['preco'],
                    tipo: it['tipo']
                });
            });
            this.itens.forEach(it => {
                this.jsonfinal.push({
                    restaurante: it['restaurante'],
                    nome: it['nome'],
                    adicionais: it['adicionais'],
                    id: it['id'],
                    obs: this.obs_s,
                    quantidade: it['quantidade'],
                    preco: it['preco'],
                    tipo: it['tipo']
                });
            });
            localStorage.setItem('carrinho', JSON.stringify(this.jsonfinal));
        }
        this.navCtrl.navigateRoot('/cardapio/' + JSON.parse(localStorage.getItem('restaurante'))['id']);
    }
    alert_erro(header, subheader, message) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function* () {
            const alert = yield this.alertCtrl.create({
                header: header,
                subHeader: subheader,
                message: message,
                buttons: ['OK']
            });
            yield alert.present();
        });
    }
};
ProdutoPage.ctorParameters = () => [
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"] },
    { type: _ionic_native_http_ngx__WEBPACK_IMPORTED_MODULE_2__["HTTP"] },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_4__["AlertController"] },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_4__["NavController"] },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_4__["LoadingController"] },
    { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"] }
];
ProdutoPage = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-produto',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./produto.page.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/produto/produto.page.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./produto.page.scss */ "./src/app/produto/produto.page.scss")).default]
    }),
    tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"],
        _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"],
        _ionic_native_http_ngx__WEBPACK_IMPORTED_MODULE_2__["HTTP"],
        _ionic_angular__WEBPACK_IMPORTED_MODULE_4__["AlertController"],
        _ionic_angular__WEBPACK_IMPORTED_MODULE_4__["NavController"],
        _ionic_angular__WEBPACK_IMPORTED_MODULE_4__["LoadingController"],
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"]])
], ProdutoPage);



/***/ })

}]);
//# sourceMappingURL=produto-produto-module-es2015.js.map